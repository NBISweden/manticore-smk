$schema: "http://json-schema.org/draft-07/schema#"

description: Various definitions

type: object

definitions:
  fs:
    type: object
    description: >
        file system layout; defines Path objects and wildcards for
        snakemake rules
    default: {}
    properties:
      external:
        type: string
        default: data/external
      interim:
        type: string
        default: data/interim
      metadata:
        type: string
        default: data/metadata
      raw:
        type: string
        default: data/raw
      resources:
        type: string
        default: resources
  rule:
    type: object
    description: generic configuration for rules
    properties:
      options:
        type: [string, array, object]
        default: ""
        items:
          type: string
      runtime:
        default: 60
        type: number
      threads:
        default: 1
        type: number
      mem_mb:
        description: Resource that defines assigned memory
        default: 8192
        type: number
  workflow:
    type: object
    description: >
        Workflow configuration. Define high-level options that apply
        to workflow logic and execution
    default: {}
    properties:
      variantcallers:
        title: Variant callers
        type: object
        default: {}
        properties:
          ind:
            type: array
            description: Variant callers for individuals
            uniqueItems: true
            default: ['gatkhc']
            items:
              type: string
              enum: ['gatkhc', 'freebayes', 'bcftools']
          pool:
            type: array
            description: Variant callers for pools
            uniqueItems: true
            default: ['popoolation']
            items:
              type: string
              enum: ['popoolation']
      regions:
        type: object
        title: region definitions
        description: >
            key-value mapping of region name to bed file defining
            regions for region-based analyses. If no regions are
            provided, the default region *all* will be generated using
            the reference file
        default: {}
        patternProperties:
          '^[a-zA-Z\-_0-9]+$':
            properties:
              bed:
                type: string
                description: filename for bed file defining regions
                pattern: .+\.bed
                examples:
                  - data/metadata/all.bed
                  - data/metadata/autosomes.bed
                  - data/metadata/PAR.bed
              ploidy:
                type: integer
                description: >
                    ploidy for region. Will be adjusted by pool size
                    for pool calls
                default: 2
              npart:
                type: integer
                description: define number of partitions for scatter-gather calls
                default: 1
        additionalProperties: false
      trim:
        type: boolean
        default: true
        description: perform adapter trimming or not
  db:
    type: object
    description:
      Configuration for various database resources
    default: {}
    properties:
      ref:
        description: Reference sequence name; path to sequence file
        type: string
